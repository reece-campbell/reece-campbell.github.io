<!DOCTYPE html>
<html>
	<head>
		<!--Script Reference[1]-->
		<script src="http://cdn.zingchart.com/zingchart.min.js"></script>
		<script>
			// Production steps of ECMA-262, Edition 5, 15.4.4.21
// Reference: http://es5.github.io/#x15.4.4.21
if (!Array.prototype.reduce) {
  Array.prototype.reduce = function(callback /*, initialValue*/) {
    'use strict';
    if (this == null) {
      throw new TypeError('Array.prototype.reduce called on null or undefined');
    }
    if (typeof callback !== 'function') {
      throw new TypeError(callback + ' is not a function');
    }
    var t = Object(this), len = t.length >>> 0, k = 0, value;
    if (arguments.length == 2) {
      value = arguments[1];
    } else {
      while (k < len && !(k in t)) {
        k++; 
      }
      if (k >= len) {
        throw new TypeError('Reduce of empty array with no initial value');
      }
      value = t[k++];
    }
    for (; k < len; k++) {
      if (k in t) {
        value = callback(value, t[k], k, t);
      }
    }
    return value;
  };
}
			var debts = [
				{
					"label":"BoS Credit",
					"startValue":9500,
					"currentValue":6489
				},
				{
					"label":"Halifax Loan",
					"startValue":7000,
					"currentValue":2603
				},
				{
					"label":"BoS Overdraft",
					"startValue":2000,
					"currentValue":779
				},
				{
					"label":"Virgin Money",
					"startValue":1800,
					"currentValue":635
				},
				{
					"label":"RBS Credit 1",
					"startValue":1088,
					"currentValue":147
				},
				{
					"label":"RBS Credit 2",
					"startValue":1920,
					"currentValue":0
				},
				{
					"label":"RBS Overdraft",
					"startValue":500,
					"currentValue":0
				}
			]
			debts.reverse();
				var chartData={
					"type":"hbar",
					"stacked":true,
					"stack-type":"normal", // Also accepts "100%"
					"title":{
		                "text":"My debt with current and starting values",
		                "background-color":"#3498db",
		                "font-family":"Helvetica",
		                "alpha":0.8,
		                "fontWeight":"none",
		                "borderBottom":"2px solid #2980b9"
		            },
				    "scale-x":{
				        "values":debts.map(function(debt){
							return debt.label;
						})
				    },
					"scale-y":{
						"thousands-separator":",",
						"format":"\u00A3%v"
					},
					"plot":{
						"bars-overlap":"50%",
					  	"value-box":{
							"thousands-separator":",",
							"text":"\u00A3%v"
						}
					},
					"plotarea":{
						"margin-left":"dynamic"	
					},
					"series":[{
					  	"values":debts.map(function(debt){
							return debt.startValue;
						}),
						"legend-item":{
					        "text":"Starting Value Total: \u00A3" + debts.reduce(function(p, c, i){return p + c.startValue;},0).toLocaleString()
					    },
						"stack":1,
						"background-color":"red",
						"value-box":{
							"font-color":"black",
							visible:false
					  	},
						"tooltip" : {
							"text" : "\u00A3%node-value",
							"thousands-separator":","
    					}
					},
					{
					  	"values":debts.map(function(debt){
							return debt.currentValue;
						}),
						"legend-item":{
					        "text":"Current Value Total: \u00A3" + debts.reduce(function(p, c, i){return p + c.currentValue;},0).toLocaleString()
					    },
					  	"stack":2,
					  	"background-color":"green",
					  	"value-box":{
							"font-color":"black",
						  	"background-color":"#88ff88",
							  "visible":false
					  	},
					  	"tooltip" : {
							"text" : "\u00A3%node-value",
							"thousands-separator":","
    					}
					}],
					"legend":{
					    
					    "border-width":0,
					    "shadow":false,
						"align": "right",
						"vertical-align": "bottom",
						"margin-bottom":"90"
						
					}
				}
			window.onload=function(){  // Render Method[2]
				zingchart.render({ 
					id:'chartDiv',
					data:chartData,
					height:400,
					width:"100%"
				});
			};
		</script>
	</head>
	<body>
		<!--Chart Placement[3]-->
		<div id='chartDiv'></div>
	</body>

</html>